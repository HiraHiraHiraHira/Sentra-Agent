# 是否启用插件
# type: boolean
# options: true | false
PLUGIN_ENABLED=true

# 插件整体执行超时时间（毫秒），优先于全局 TOOL_TIMEOUT_MS
# type: number
# range: 10000-300000
PLUGIN_TIMEOUT_MS=180000

# 单次请求/导航超时时间（毫秒），默认90000，建议根据网络调整
# type: number
# range: 10000-300000
WEB_PARSER_TIMEOUT=90000

# 最大正文内容长度（字符），超过将截断
# type: number
# range: 10000-1000000
WEB_PARSER_MAX_CONTENT_LENGTH=200000

# Puppeteer 渲染失败时的最大重试次数
# type: number
# range: 0-10
WEB_PARSER_MAX_RETRIES=2

# 每次重试前的基础等待时间（毫秒）
# type: number
# range: 500-60000
WEB_PARSER_RETRY_DELAY=2000

# 等待特定选择器出现后再提取内容，留空则不等待
# type: string
WEB_PARSER_WAIT_FOR_SELECTOR=

# 浏览器视口宽度（px）
# type: number
# range: 320-8000
WEB_PARSER_VIEWPORT_WIDTH=1366

# 浏览器视口高度（px）
# type: number
# range: 320-8000
WEB_PARSER_VIEWPORT_HEIGHT=768

# 页面等待策略
# type: enum
# options: auto | network_idle | scroll | dom_stable
WEB_PARSER_WAIT_STRATEGY=auto

# 组合等待的最大总时长（毫秒），包括网络/滚动/DOM 稳定等
# type: number
# range: 1000-60000
WEB_PARSER_MAX_TOTAL_WAIT=15000

# 网络空闲判定的静默空档时间（毫秒）
# type: number
# range: 100-10000
WEB_PARSER_NETWORK_IDLE_IDLE_MS=800

# DOM 稳定检测的采样间隔（毫秒）
# type: number
# range: 100-10000
WEB_PARSER_DOM_STABLE_SAMPLE_MS=500

# DOM 稳定所需的连续稳定采样次数
# type: number
# range: 1-20
WEB_PARSER_DOM_STABLE_SAMPLES=4

# 触发懒加载滚动的总步数
# type: number
# range: 0-50
WEB_PARSER_SCROLL_STEPS=6

# 每次滚动的像素距离（px）
# type: number
# range: 100-5000
WEB_PARSER_SCROLL_STEP_PX=1200

# 滚动步骤间的延迟时间（毫秒）
# type: number
# range: 50-5000
WEB_PARSER_SCROLL_DELAY_MS=250

# 加载中提示文本模式匹配（逗号分隔），命中时额外滚动+等待
# type: string
WEB_PARSER_LOADING_PATTERNS=loading,加载中,请稍候,正在加载,请稍后,please wait,正在编译,processing,spinner

# 文本质量最低字符数阈值，低于此值会在渲染阶段继续等待/滚动
# type: number
# range: 0-100000
WEB_PARSER_MIN_GOOD_LEN=400

# 按资源类型拦截的资源（逗号分隔），节省带宽
# type: string
WEB_PARSER_BLOCK_TYPES=image,font,media

# 按 URL 片段拦截的请求模式（逗号分隔），防追踪
# type: string
WEB_PARSER_BLOCK_URL_PATTERNS=googletagmanager,analytics,tracking,ads

# 页面就绪判断的 JavaScript 表达式，true 时认为页面加载完成，留空则使用默认策略
# type: string
WEB_PARSER_READY_EXPRESSION=

# 自定义 User-Agent 字符串，默认最新 Chrome + SentraWebParser 标识
# type: string
WEB_PARSER_USER_AGENT="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36 SentraWebParser/1.0.0"

# UA 平台标识（传给 Puppeteer），可选值：Windows/Android/iOS/Linux/macOS
# type: enum
# options: Windows | Android | iOS | Linux | macOS
WEB_PARSER_UA_PLATFORM=Windows

# UA 元数据 JSON（遵循 CDP Emulation.UserAgentMetadata），自定义平台/移动端等信息
# type: string
WEB_PARSER_UA_METADATA={"platform":"Windows","mobile":false}

# 是否使用代理服务器
# type: boolean
# options: true | false
WEB_PARSER_USE_PROXY=false

# 代理服务器地址，支持 http://host:port 或 socks5://host:port 格式，需配合 USE_PROXY=true
# type: string
WEB_PARSER_PROXY_SERVER=

# 是否启用 Readability 正文抽取
# type: boolean
# options: true | false
WEB_PARSER_ENABLE_READABILITY=true

# Readability 处理的最大 HTML 字符长度阈值（超过则使用简易抽取，以避免性能问题）
# type: number
# range: 50000-5000000
WEB_PARSER_READABILITY_MAX_HTML_BYTES=800000

# 是否启用 Puppeteer 截图
# type: boolean
# options: true | false
WEB_PARSER_SCREENSHOT=true

# 是否使用 fullPage 截图
# type: boolean
# options: true | false
WEB_PARSER_SCREENSHOT_FULLPAGE=false

# fullPage 截图最大页面高度阈值（px）：超过则自动回退为 viewport 截图，避免 "Page is too large"
# type: number
# range: 2000-50000
WEB_PARSER_SCREENSHOT_MAX_HEIGHT_PX=16000

# 截图格式：png|jpeg|webp
# type: enum
# options: png | jpeg | webp
WEB_PARSER_SCREENSHOT_TYPE=png

# 截图质量（仅 jpeg/webp 生效，1-100）
# type: number
# range: 1-100
WEB_PARSER_SCREENSHOT_QUALITY=80

# 截图最大大小上限（MB），超过则不返回 dataUri/不用于读图
# type: number
# range: 1-50
WEB_PARSER_SCREENSHOT_MAX_MB=15

# 是否在最终输出中返回截图 dataUri（默认 false，开启会使返回体很大）
# type: boolean
# options: true | false
WEB_PARSER_SCREENSHOT_RETURN_DATA_URI=false

# 是否启用截图读图（视觉 LLM），返回 visionText
# type: boolean
# options: true | false
WEB_PARSER_VISION=true

# 视觉模型 API Key（可选；若不填，将使用 VISION_API_KEY 或全局 llm.apiKey）
# type: string
WEB_PARSER_VISION_API_KEY=

# 视觉模型 Base URL（可选；若不填，将使用 VISION_BASE_URL 或全局 llm.baseURL）
# type: string
WEB_PARSER_VISION_BASE_URL=

# 视觉模型名称（可选；若不填，将使用 VISION_MODEL 或全局 llm.model）
# type: string
WEB_PARSER_VISION_MODEL=

# 视觉模型单次返回 token 上限，-1 表示不传 max_tokens，由模型自行决定
# type: number
# range: -1 | 64-8192
WEB_PARSER_VISION_MAX_TOKENS=-1

# 视觉识别提示词（可自定义）
# type: string
WEB_PARSER_VISION_PROMPT=请根据截图提取网页的主要可读内容（尽量保留段落结构），忽略导航栏、页脚、按钮、广告和重复元素。
